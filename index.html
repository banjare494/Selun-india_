<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Salon India ‚Ä¢ PhonePe Style</title>
<meta name="description" content="Bharat ke salon owners ke liye simple register ‚Ä¢ list ‚Ä¢ booking demo (local storage)." />
<style>
/* ========= PHONEPE STYLE ‚Äì LIGHT THEME ========= */
:root{
  --brand:#5b2be0;        /* PhonePe-ish purple */
  --brand-2:#6236ff;
  --ink:#101828;          /* text */
  --muted:#667085;
  --bg:#ffffff;
  --card:#ffffff;
  --line:#e5e7eb;
  --soft:#f4f6fb;         /* page background */
  --ok:#16a34a; --warn:#f59e0b; --err:#ef4444;
  --radius:18px;
  --shadow:0 8px 24px rgba(17, 24, 39, .06);
}

*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--soft);color:var(--ink);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
a{color:inherit;text-decoration:none}
.wrap{max-width:900px;margin:0 auto;padding:14px}

/* Top App Bar */
.appbar{
  position:sticky;top:0;z-index:10;background:var(--bg);
  display:flex;align-items:center;gap:10px;padding:12px 14px;margin:0 auto;
  border-bottom:1px solid var(--line);
}
.logo{display:flex;align-items:center;gap:10px;font-weight:800;font-size:18px;}
.logo .dot{width:34px;height:34px;border-radius:12px;background:var(--brand);
  display:inline-flex;align-items:center;justify-content:center;color:#fff;}
.badge{font-size:11px;padding:4px 8px;border-radius:999px;background:#ede9fe;color:#5b2be0;margin-left:6px}

/* Tabs (PhonePe style) */
.tabs{display:flex;gap:10px;overflow:auto;padding:10px 14px;background:var(--bg);position:sticky;top:58px;z-index:9;border-bottom:1px solid var(--line)}
.tab{white-space:nowrap;background:#f6f7fb;border:1px solid var(--line);padding:10px 14px;border-radius:999px;font-weight:600}
.tab.active{background:linear-gradient(135deg,var(--brand),var(--brand-2));color:#fff;border-color:transparent}

/* Hero / KPIs */
.card{background:var(--card);border:1px solid var(--line);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px}
.kpis{display:grid;gap:12px;margin-top:12px}
.kpi{background:#fff;border:1px dashed var(--line);border-radius:16px;padding:14px;text-align:center}
.kpi .v{font-size:22px;font-weight:800}
.kpi .t{font-size:12px;color:var(--muted)}

/* Controls */
.row{display:flex;gap:10px;flex-wrap:wrap}
.input, select, input[type="text"], input[type="number"], input[type="tel"]{
  width:100%;padding:13px 14px;border-radius:14px;border:1px solid var(--line);
  background:#fff;outline:none;
}
input:focus, select:focus{border-color:#b9c2ff;box-shadow:0 0 0 4px #ebe9ff}
.btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;
  padding:12px 16px;border-radius:14px;border:1px solid var(--line);background:#f6f7fb;font-weight:700}
.btn.primary{background:linear-gradient(135deg,var(--brand),var(--brand-2));color:#fff;border-color:transparent}
.btn.full{width:100%}

/* List */
.list{display:grid;gap:12px;margin-top:12px}
.item{background:#fff;border:1px solid var(--line);border-radius:16px;padding:14px;display:grid;gap:6px}
.item h4{margin:0;font-size:16px}
.badges{display:flex;gap:6px;flex-wrap:wrap}
.tag{font-size:11px;background:#eef2ff;color:#3730a3;border:1px solid #e0e7ff;padding:4px 8px;border-radius:999px}

/* Section titles */
.h2{font-size:18px;font-weight:800;margin:8px 0 12px}
.muted{color:var(--muted)}

/* Bottom spacing */
.sp{height:24px}

/* Hide sections utility */
.hidden{display:none}

/* Small helper */
hr.sep{border:0;border-top:1px dashed var(--line);margin:10px 0}
</style>
</head>
<body>
  <!-- App Bar -->
  <div class="appbar wrap" style="padding-left:14px;padding-right:14px">
    <div class="logo">
      <div class="dot">üíà</div>
      Salon India <span class="badge">PhonePe style</span>
    </div>
    <div style="margin-left:auto;font-size:12px;color:var(--muted)">Demo ‚Ä¢ Local data</div>
  </div>

  <!-- Tabs -->
  <div class="tabs wrap" id="tabs">
    <a class="tab active" data-screen="home">Home</a>
    <a class="tab" data-screen="list">Salon List</a>
    <a class="tab" data-screen="register">Owner Register</a>
  </div>

  <div class="wrap" id="screen-home">
    <div class="card">
      <div class="h2">Ek jagah ‚Ä¢ easy booking</div>
      <div class="muted">Owners apna salon add karein. Customers list me salon khoj kar WhatsApp se baat kar sakte hain.</div>
      <div class="kpis" style="grid-template-columns:repeat(3,1fr)">
        <div class="kpi"><div class="v" id="kTotal">0</div><div class="t">Total Salons</div></div>
        <div class="kpi"><div class="v" id="kToday">0</div><div class="t">Today Tokens</div></div>
        <div class="kpi"><div class="v" id="kCity">‚Äî</div><div class="t">Top City</div></div>
      </div>
      <div style="margin-top:12px" class="row">
        <a class="btn primary" data-screen="register">+ Add your Salon</a>
        <a class="btn" data-screen="list">Browse salons</a>
      </div>
    </div>

    <div class="sp"></div>

    <div class="card">
      <div class="h2">How it works?</div>
      <ol class="muted" style="margin:0;padding-left:18px;line-height:1.6">
        <li>Owner form bhare ‚Üí Create Account.</li>
        <li>Salon list me aapka card aa jayega.</li>
        <li>Customer search/filter kare ‚Üí WhatsApp pe baat kare.</li>
      </ol>
    </div>
  </div>

  <!-- Salon List -->
  <div class="wrap hidden" id="screen-list">
    <div class="h2">üîé Salon List</div>
    <div class="card">
      <div class="row">
        <input id="qCity" class="input" placeholder="City / Area" />
        <select id="qService">
          <option value="">Any service</option>
          <option value="haircut">Haircut</option>
          <option value="shave">Shave</option>
          <option value="beard">Beard</option>
          <option value="facial">Facial</option>
        </select>
        <input id="qText" class="input" placeholder="Search name" />
        <button class="btn" id="btnSearch">Search</button>
      </div>
    </div>
    <div class="list" id="list"></div>
  </div>

  <!-- Register -->
  <div class="wrap hidden" id="screen-register">
    <div class="h2">üìù Owner Register</div>
    <div class="card">
      <div class="row">
        <input id="owner" class="input" placeholder="Owner Name" />
        <input id="mobile" class="input" placeholder="Mobile (10-digit)" inputmode="numeric" maxlength="10" />
        <input id="salon" class="input" placeholder="Salon Name" />
        <input id="city"  class="input" placeholder="City / Area" />
        <input id="slug"  class="input" placeholder="Short Link (slug) ‚Äî e.g., kamlesh-salon" />
      </div>
      <hr class="sep" />
      <div class="row">
        <div style="flex:1">
          <div class="muted" style="font-size:12px;margin-bottom:6px">Services & Prices (‚Çπ)</div>
          <div class="row">
            <input id="pHaircut" class="input" type="number" placeholder="Haircut (‚Çπ)" value="120" />
            <input id="pShave"   class="input" type="number" placeholder="Shave (‚Çπ)"   value="60" />
            <input id="pBeard"   class="input" type="number" placeholder="Beard (‚Çπ)"   value="80" />
            <input id="pFacial"  class="input" type="number" placeholder="Facial (‚Çπ)"  value="300" />
          </div>
        </div>
      </div>
      <div class="row">
        <input id="wa" class="input" placeholder="WhatsApp Number (e.g., 91XXXXXXXXXX)" />
      </div>
      <div class="row">
        <button class="btn primary full" id="btnCreate">Create Account</button>
      </div>
      <div id="msg" class="muted" style="margin-top:8px"></div>
    </div>
  </div>

<script>
/* ======= MIN JS (no libraries) ======= */
const $ = sel => document.querySelector(sel);
const $$ = sel => Array.from(document.querySelector
<!DOCTYPE html><html lang="hi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Salon India ‚Äî Register ‚Ä¢ List ‚Ä¢ Book</title>
  <meta name="description" content="Bharat ke salon owners ke liye free MVP: register, apna page banao, customers token/booking lein." />
  <style>
    :root{
  --bg:white;
  --fg:black;
}
 --muted:#9aa3b2;--card:#0e1528;--line:#243047;--brand:#22d3ee;--ok:#34d399;--warn:#fbbf24;--err:#fb7185;
    }
    *{box-sizing:border-box}
   body {
  margin: 0;
  background: white;
  color: black;
} ;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Noto Sans',sans-serif}
    .wrap{max-width:1040px;margin:0 auto;padding:20px}
    header{display:flex;gap:12px;align-items:center;justify-content:space-between}
    h1{margin:0;font-size:clamp(18px,3vw,28px)}
    nav{display:flex;gap:8px;flex-wrap:wrap}
    a.btn,button{padding:10px 14px;border-radius:12px;border:1px solid #2a3956;background: white; color:black; text-decoration:none;cursor:pointer}
    a.btn:hover,button:hover{border-color:var(--brand);box-shadow:0 0 0 3px #22d3ee22}
    .grid{display:grid;gap:14px}
    .two{grid-template-columns:1fr;}
    @media(min-width:900px){.two{grid-template-columns:1.2fr .8fr}}
    .card background:white;(180deg,#0e1528aa,#0e1528);border:1px solid var(--line);border-radius:16px;padding:16px}
    label{display:block;font-size:13px;color:var(--muted);margin:6px 0}
    input,select,textarea{width:100%;padding:12px;border-radius:12px;border:1px solid #2a3956;background:white;color:black;outline:none}
    input:focus,select:focus,textarea:focus{border-color:var(--brand);box-shadow:0 0 0 3px #22d3ee33}
    .kpis{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
    .kpi{border:1px solid var(--line);border-radius:14px;padding:12px;text-align:center}
    .kpi h3{margin:0;font-size:22px}
    .list{display:grid;grid-template-columns:1fr;gap:10px}
    @media(min-width:760px){.list{grid-template-columns:repeat(2,1fr)}}
    .item{border:1px solid var(--line);border-radius:14px;padding:14px;background:white;}
    .item h3{margin:0 0 4px}
    .pill{display:inline-flex;gap:6px;align-items:center;border:1px dashed #2a3956;padding:6px 10px;border-radius:999px;color:#cbd5e1;font-size:12px}
    .muted{color:var(--muted)}
    footer{opacity:.7;text-align:center;padding:28px 0;font-size:12px}
    .sr{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>üíà Salon India ‚Äî Register ‚Ä¢ List ‚Ä¢ Book</h1>
      <nav>
        <a class="btn" href="#home">Home</a>
        <a class="btn" href="#directory">Salon List</a>
        <a class="btn" href="#register">Owner Register</a>
        <a class="btn" id="ownerBtn" href="#owner">Owner Dashboard</a>
      </nav>
    </header><!-- HOME -->
<section id="home" class="card">
  <div class="grid two">
    <div>
      <h2>Ek jagah par saare salons ‚Äî owners ke liye free shuruaat</h2>
      <p>Owners register karein, apna page banayein, rate list set karein. Customers aake **token/booking** lein. Yeh MVP aap <b>GitHub Pages</b> par free host kar sakte hain. (Data abhi <b>iss device</b> ke local storage me rehta hai ‚Äî demo ke liye best.)</p>
      <div class="pill">üöÄ MVP ‚Ä¢ üì± Mobile-first ‚Ä¢ üÜì Free Hosting ‚Ä¢ üáÆüá≥ Hindi</div>
    </div>
    <div>
      <div class="kpis">
        <div class="kpi"><h3 id="kpiSalons">0</h3><p class="muted">Total Salons</p></div>
        <div class="kpi"><h3 id="kpiBookings">0</h3><p class="muted">Today Tokens</p></div>
        <div class="kpi"><h3 id="kpiCity">‚Äî</h3><p class="muted">Top City</p></div>
      </div>
    </div>
  </div>
</section>

<!-- DIRECTORY -->
<section id="directory" class="card">
  <h2>üîé Salon List (Directory)</h2>
  <div class="grid" style="grid-template-columns:2fr 2fr 2fr 1fr">
    <input id="qCity" placeholder="City / Area" />
    <select id="qService">
      <option value="">Any service</option>
      <option>Haircut</option>
      <option>Shave</option>
      <option>Beard Trim</option>
      <option>Facial</option>
    </select>
    <input id="qText" placeholder="Search name" />
    <button id="qFind">Search</button>
  </div>
  <div id="dirList" class="list" style="margin-top:12px"></div>
</section>

<!-- REGISTER -->
<section id="register" class="card">
  <h2>üìù Owner Register</h2>
  <form id="regForm">
    <label>Owner Name</label>
    <input id="rOwner" required />
    <label>Mobile (10-digit)</label>
    <input id="rPhone" pattern="[0-9]{10}" inputmode="numeric" required />
    <label>Salon Name</label>
    <input id="rName" required />
    <label>City / Area</label>
    <input id="rCity" required />
    <label>Short Link (slug) ‚Äî jaise: kamlesh-salon</label>
    <input id="rSlug" placeholder="unique-hyphen-name" required />
    <label>Services & Prices (‚Çπ)</label>
    <div class="grid" style="grid-template-columns:repeat(4,1fr)">
      <div><small>Haircut</small><input id="rpHaircut" type="number" value="120" /></div>
      <div><small>Shave</small><input id="rpShave" type="number" value="60" /></div>
      <div><small>Beard</small><input id="rpBeard" type="number" value="80" /></div>
      <div><small>Facial</small><input id="rpFacial" type="number" value="300" /></div>
    </div>
    <label>WhatsApp Number (with country code, e.g., 91XXXXXXXXXX)</label>
    <input id="rWA" placeholder="91XXXXXXXXXX" />
    <div class="grid" style="grid-template-columns:1fr 1fr">
      <button type="submit">Create Account</button>
      <button type="button" id="rLogin" class="btn">Already Registered? Login</button>
    </div>
    <small id="regMsg" class="muted"></small>
  </form>
</section>

<!-- OWNER DASHBOARD -->
<section id="owner" class="card">
  <h2>üìü Owner Dashboard</h2>
  <div id="ownerGate" class="muted">Login ya register karke aaiye.</div>
  <div id="ownerWrap" style="display:none">
    <div class="grid two">
      <div>
        <label>Average Service Time (minutes)</label>
        <input id="oAvg" type="number" min="5" max="120" step="5" value="15" />
        <label>Total Chairs</label>
        <select id="oChairs"><option>1</option><option>2</option><option>3</option><option>4</option></select>
        <div class="grid" style="grid-template-columns:1fr 1fr;margin-top:8px">
          <button id="oSave">Save Settings</button>
          <button id="oShare" class="btn">Share Public Link</button>
        </div>
        <small class="muted">Public page: <span id="oLink">‚Äî</span></small>
      </div>
      <div>
        <h3 style="margin:0 0 6px">Queue</h3>
        <ol id="oQueue"></ol>
        <div class="grid" style="grid-template-columns:1fr 1fr">
          <button id="oComplete">Complete Current</button>
          <button id="oReset" class="btn">Reset Day</button>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- PUBLIC SALON PAGE -->
<section id="public" class="card" style="display:none">
  <div id="pubHead"></div>
  <div class="grid two">
    <div>
      <h3>üéüÔ∏è Get Token / Book</h3>
      <form id="pForm">
        <label>Full Name</label>
        <input id="pName" required />
        <label>Service</label>
        <select id="pSvc"></select>
        <label>Phone (optional)</label>
        <input id="pPhone" inputmode="numeric" pattern="[0-9]{10}" />
        <label>Notes (optional)</label>
        <textarea id="pNotes" rows="2"></textarea>
        <div class="grid" style="grid-template-columns:1fr 1fr">
          <button type="submit">Generate Token</button>
          <button type="button" id="pWA" class="btn">WhatsApp</button>
        </div>
        <small id="pMsg" class="muted"></small>
      </form>
    </div>
    <div>
      <h3 style="margin:0 0 6px">Live Status</h3>
      <div id="pStatus" class="muted">‚Äî</div>
      <h4>Price List</h4>
      <ul id="pPrices"></ul>
    </div>
  </div>
</section>

<footer>Made for demo ‚Äî Host on GitHub Pages. Data local storage only (no server).</footer>

  </div>  <script>
    // --------- Simple Store (localStorage) ---------
    const LS = {
      get:(k,def)=>{try{return JSON.parse(localStorage.getItem(k)) ?? def}catch{return def}},
      set:(k,v)=>localStorage.setItem(k,JSON.stringify(v))
    };

    // Data models
    // salons: [{id, owner, phone, name, city, slug, wa, prices, avg, chairs, nextToken, queue:[] }]
    let salons = LS.get('salons', []);
    let currentOwnerId = LS.get('owner_id', null);

    // Helpers
    const $ = id=>document.getElementById(id);
    const slugify = s=>s.toLowerCase().replace(/[^a-z0-9]+/g,'-').replace(/(^-|-$)/g,'');
    const findSalonBySlug = slug => salons.find(x=>x.slug===slug);
    const findSalonById = id => salons.find(x=>x.id===id);

    function save(){ LS.set('salons', salons); LS.set('owner_id', currentOwnerId); paintKPIs(); }

    function paintKPIs(){
      // Total salons
      $('#kpiSalons').textContent = salons.length;
      // Today tokens sum (rough: queue length across salons)
      const today = salons.reduce((a,s)=>a + (s?.queue?.length||0) + (s.nextToken-1), 0);
      $('#kpiBookings').textContent = today;
      // Top city: simple mode
      const map = {};
      salons.forEach(s=>{map[s.city]=(map[s.city]||0)+1});
      let topCity = '‚Äî', max=0; Object.entries(map).forEach(([c,n])=>{if(n>max){max=n;topCity=c}});
      $('#kpiCity').textContent = topCity;
    }

    // --------- Directory ---------
    const dirList = $('#dirList');
    function renderDirectory(list){
      dirList.innerHTML = '';
      if(!list.length){ dirList.innerHTML = '<p class="muted">No salons found.</p>'; return; }
      list.forEach(s=>{
        const el = document.createElement('div'); el.className='item';
        el.innerHTML = `<h3>${s.name}</h3>
          <div class="muted">${s.city} ‚Ä¢ Avg ${s.avg||15}m ‚Ä¢ Chairs ${s.chairs||1}</div>
          <div style="margin:8px 0">Services: Haircut ‚Çπ${s.prices.Haircut}, Shave ‚Çπ${s.prices.Shave}, Beard ‚Çπ${s.prices.Beard}, Facial ‚Çπ${s.prices.Facial}</div>
          <div class="grid" style="grid-template-columns:1fr 1fr">
            <a class="btn" href="?salon=${encodeURIComponent(s.slug)}#public">Open Page</a>
            <button class="btn" onclick="copyLink('${s.slug}')">Copy Link</button>
          </div>`;
        dirList.appendChild(el);
      });
    }

    function searchDirectory(){
      const city = $('#qCity').value.trim().toLowerCase();
      const svc = $('#qService').value;
      const txt = $('#qText').value.trim().toLowerCase();
      let list = salons.filter(s=>
        (!city || s.city.toLowerCase().includes(city)) &&
        (!txt || s.name.toLowerCase().includes(txt) || s.owner.toLowerCase().includes(txt))
      );
      if(svc){ list = list.filter(s=> s.prices && s.prices[svc.replace(' ','')] != null ); }
      renderDirectory(list);
    }
    $('#qFind').onclick=searchDirectory;

    function copyLink(slug){
      const url = location.origin + location.pathname + `?salon=${encodeURIComponent(slug)}#public`;
      navigator.clipboard.writeText(url).then(()=>alert('Link copied'));
    }

    // --------- Register / Login ---------
    $('#regForm').addEventListener('submit', (e)=>{
      e.preventDefault();
      const owner = $('#rOwner').value.trim();
      const phone = $('#rPhone').value.trim();
      const name = $('#rName').value.trim();
      const city = $('#rCity').value.trim();
      let slug = slugify($('#rSlug').value.trim());
      if(!owner||!phone||!name||!city||!slug){ return; }
      if(findSalonBySlug(slug)){ slug = slug + '-' + (Math.random()*100|0); }
      const salon = {
        id: Date.now(), owner, phone, name, city, slug,
        wa: $('#rWA').value.trim(),
        prices:{
          Haircut:+$('#rpHaircut').value||120,
          Shave:+$('#rpShave').value||60,
          Beard:+$('#rpBeard').value||80,
          Facial:+$('#rpFacial').value||300,
        },
        avg:15, chairs:1, nextToken:1, queue:[]
      };
      salons.push(salon); currentOwnerId = salon.id; save();
      $('#regMsg').textContent = `‚úÖ Account created. Public link: ${location.origin + location.pathname}?salon=${salon.slug}#public`;
      location.hash = '#owner';
      paintOwner();
    });

    $('#rLogin').onclick=()=>{
      const phone = prompt('Enter your 10-digit mobile');
      const found = salons.find(s=>s.phone.replace(/\D/g,'')===String(phone||'').replace(/\D/g,''));
      if(found){ currentOwnerId = found.id; save(); location.hash='#owner'; paintOwner(); }
      else { alert('Number not found. Please register.'); }
    };

    // --------- Owner Dashboard ---------
    const oWrap = $('#ownerWrap');
    const oGate = $('#ownerGate');
    const oQueue = $('#oQueue');

    function paintOwner(){
      const s = findSalonById(currentOwnerId);
      if(!s){ oWrap.style.display='none'; oGate.style.display=''; oGate.textContent='Login ya register karke aaiye.'; return; }
      oGate.style.display='none'; oWrap.style.display='';
      $('#oAvg').value = s.avg; $('#oChairs').value = String(s.chairs);
      const link = location.origin + location.pathname + `?salon=${encodeURIComponent(s.slug)}#public`;
      $('#oLink').textContent = link;
      // Queue
      oQueue.innerHTML = '';
      s.queue.forEach((q,i)=>{
        const li = document.createElement('li');
        li.textContent = `#${q.token} ‚Ä¢ ${q.name} ‚Äî ${q.service}${q.phone?` ‚Ä¢ ${q.phone}`:''}`;
        const b = document.createElement('button'); b.textContent='√ó'; b.className='btn'; b.style.marginLeft='8px';
        b.onclick=()=>{ s.queue.splice(i,1); save(); paintOwner(); };
        li.appendChild(b); oQueue.appendChild(li);
      });
    }

    $('#oSave').onclick=()=>{
      const s = findSalonById(currentOwnerId); if(!s) return;
      s.avg = Math.max(5, +$('#oAvg').value||15);
      s.chairs = Math.max(1, +$('#oChairs').value||1);
      save(); alert('Saved');
    };
    $('#oShare').onclick=()=>{
      const s = findSalonById(currentOwnerId); if(!s) return;
      const url = location.origin + location.pathname + `?salon=${encodeURIComponent(s.slug)}#public`;
      try{ navigator.share({title:s.name, text:'Book your turn here', url}); }
      catch{ navigator.clipboard.writeText(url); alert('Link copied'); }
    };
    $('#oReset').onclick=()=>{
      const s = findSalonById(currentOwnerId); if(!s) return;
      if(confirm('Reset tokens & queue for today?')){ s.nextToken=1; s.queue=[]; save(); paintOwner(); }
    };
    $('#oComplete').onclick=()=>{
      const s = findSalonById(currentOwnerId); if(!s) return;
      if(s.queue.length){ const cur = s.queue.shift(); save(); paintOwner(); }
    };

    // --------- Public Salon Page ---------
    function eta(s){
      const waiting = Math.max(0, s.queue.length - s.chairs);
      return Math.max(0, Math.ceil(waiting / Math.max(1,s.chairs)) * s.avg);
    }

    function openPublic(slug){
      const s = findSalonBySlug(slug);
      if(!s){ alert('Salon not found'); return; }
      $('#home').style.display='none';
      $('#directory').style.display='none';
      $('#register').style.display='none';
      $('#owner').style.display='none';
      $('#public').style.display='';
      $('#pubHead').innerHTML = `<h2 style="margin:0">${s.name}</h2><div class="muted">${s.city} ‚Ä¢ Avg ${s.avg}m ‚Ä¢ Chairs ${s.chairs}</div>`;
      const svc = $('#pSvc'); svc.innerHTML=''; ['Haircut','Shave','Beard Trim','Facial'].forEach(k=>{
        const opt=document.createElement('option'); opt.value=k; opt.textContent=`${k}`; svc.appendChild(opt);
      });
      const ul = $('#pPrices'); ul.innerHTML='';
      ul.innerHTML = `<li>Haircut: ‚Çπ${s.prices.Haircut}</li><li>Shave: ‚Çπ${s.prices.Shave}</li><li>Beard Trim: ‚Çπ${s.prices.Beard}</li><li>Facial: ‚Çπ${s.prices.Facial}</li>`;
      const stat = ()=> $('#pStatus').textContent = `Queue: ${s.queue.length} ‚Ä¢ ETA: ${eta(s)} minutes`;
      stat();

      // Token form
      $('#pForm').onsubmit=(e)=>{
        e.preventDefault();
        const name = $('#pName').value.trim(); if(!name) return;
        const q = { token: s.nextToken++, name, service: $('#pSvc').value, phone: $('#pPhone').value.trim(), notes: $('#pNotes').value.trim(), time: Date.now() };
        s.queue.push(q); save();
        $('#pMsg').textContent = `‚úÖ Token #${q.token} generated. ETA ${eta(s)} minutes.`; stat();
        $('#pForm').reset();
      };

      $('#pWA').onclick=()=>{
        const name = $('#pName').value.trim()||'Customer';
        const msg = encodeURIComponent(`Hello! I want a token at ${s.name}. My name: ${name}.`);
        const n = (s.wa||'').replace(/\D/g,'');
        const url = n?`https://wa.me/${n}?text=${msg}`:`https://wa.me/?text=${msg}`;
        window.open(url,'_blank');
      };
    }

    // --------- Router ---------
    function route(){
      // Default show base sections
      $('#home').style.display='';
      $('#directory').style.display='';
      $('#register').style.display='';
      $('#owner').style.display='';
      $('#public').style.display='none';
      paintOwner(); searchDirectory(); paintKPIs();
      const params = new URLSearchParams(location.search);
      const slug = params.get('salon');
      if(location.hash==='#public' && slug){ openPublic(slug); }
    }

    window.addEventListener('hashchange', route);
    window.addEventListener('load', route);

    // On first load, seed with one demo salon if none
    if(salons.length===0){
      salons.push({
        id:1, owner:'Demo Owner', phone:'9999999999', name:'Demo Salon', city:'Raipur', slug:'demo-salon', wa:'919999999999',
        prices:{Haircut:120,Shave:60,Beard:80,Facial:300}, avg:15, chairs:1, nextToken:1, queue:[]
      }); save();
    }
  </script></body>
</html>
